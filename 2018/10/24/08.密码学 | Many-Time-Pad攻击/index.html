<!DOCTYPE html>
<html style="display: none;" lang="zh">
    <head>
    <meta charset="utf-8">
    <!--
        © Material Theme
        https://github.com/viosey/hexo-theme-material
        Version: 1.5.6 -->
    <script>
        window.materialVersion = "1.5.6"
        // Delete localstorage with these tags
        window.oldVersion = [
            'codestartv1',
            '1.3.4',
            '1.4.0',
            '1.4.0b1',
            '1.5.0',
            '1.5.2',
            '1.5.5'
        ]
    </script>

    <!-- dns prefetch -->
    <meta http-equiv="x-dns-prefetch-control" content="on">





    <link rel="dns-prefetch" href="https://sevenspace-liutt.disqus.com"/>



    <link rel="dns-prefetch" href="https://hm.baidu.com"/>

    <link rel="dns-prefetch" href="https://www.google-analytics.com"/>



    <link rel="dns-prefetch" href="https://fonts.googleapis.com"/>





    <!-- Meta & Info -->
    <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
    <meta name="renderer" content="webkit">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

    <!-- Title -->
    
    <title>
        
            密码学 | Many-Time-Pad攻击 | 
        
        Ricardo Liu&#39;s Blog
    </title>

    <!-- Favicons -->
    <link rel="icon shortcut" type="image/ico" href="/Blog/img/myfavicon.png">
    <link rel="icon" href="/Blog/img/myfavicon.png">

    <meta name="format-detection" content="telephone=no"/>
    <meta name="description" itemprop="description" content="从理论上可知，Vernam密码的一次一密(One-Time-Pad)方案是不可破解的。但是，如果同一段密钥被用来加密多段密文，即多次一密(Many-Time-Pad)的情况下，加密方案就不再安全。本文以一次密码学课的作业为例，介绍Many-Time-Pad Attack的具体过程。">
    <meta name="keywords" content="编程, 摄影, 一切有趣的事情, Coding, Photography, Anything Interesting,密码学,Vernam">
    <meta name="theme-color" content="#0097A7">

    <!-- Disable Fucking Bloody Baidu Tranformation -->
    <meta http-equiv="Cache-Control" content="no-transform" />
    <meta http-equiv="Cache-Control" content="no-siteapp" />

    <!--[if lte IE 9]>
        <link rel="stylesheet" href="/css/ie-blocker.css">

        
            <script src="/js/ie-blocker.zhCN.js"></script>
        
    <![endif]-->

    <!-- Import lsloader -->
    <script>(function(){window.lsloader={jsRunSequence:[],jsnamemap:{},cssnamemap:{}};lsloader.removeLS=function(a){try{localStorage.removeItem(a)}catch(b){}};lsloader.setLS=function(a,c){try{localStorage.setItem(a,c)}catch(b){}};lsloader.getLS=function(a){var c="";try{c=localStorage.getItem(a)}catch(b){c=""}return c};versionString="/*"+(window.materialVersion||"unknownVersion")+"*/";lsloader.clean=function(){try{var b=[];for(var a=0;a<localStorage.length;a++){b.push(localStorage.key(a))}b.forEach(function(e){var f=lsloader.getLS(e);if(window.oldVersion){var d=window.oldVersion.reduce(function(g,h){return g||f.indexOf("/*"+h+"*/")!==-1},false);if(d){lsloader.removeLS(e)}}})}catch(c){}};lsloader.clean();lsloader.load=function(f,a,b,d){if(typeof b==="boolean"){d=b;b=undefined}d=d||false;b=b||function(){};var e;e=this.getLS(f);if(e&&e.indexOf(versionString)===-1){this.removeLS(f);this.requestResource(f,a,b,d);return}if(e){var c=e.split(versionString)[0];if(c!=a){console.log("reload:"+a);this.removeLS(f);this.requestResource(f,a,b,d);return}e=e.split(versionString)[1];if(d){this.jsRunSequence.push({name:f,code:e});this.runjs(a,f,e)}else{document.getElementById(f).appendChild(document.createTextNode(e));b()}}else{this.requestResource(f,a,b,d)}};lsloader.requestResource=function(b,e,a,c){var d=this;if(c){this.iojs(e,b,function(h,f,g){d.setLS(f,h+versionString+g);d.runjs(h,f,g)})}else{this.iocss(e,b,function(f){document.getElementById(b).appendChild(document.createTextNode(f));d.setLS(b,e+versionString+f)},a)}};lsloader.iojs=function(d,b,g){var a=this;a.jsRunSequence.push({name:b,code:""});try{var f=new XMLHttpRequest();f.open("get",d,true);f.onreadystatechange=function(){if(f.readyState==4){if((f.status>=200&&f.status<300)||f.status==304){if(f.response!=""){g(d,b,f.response);return}}a.jsfallback(d,b)}};f.send(null)}catch(c){a.jsfallback(d,b)}};lsloader.iocss=function(f,c,h,a){var b=this;try{var g=new XMLHttpRequest();g.open("get",f,true);g.onreadystatechange=function(){if(g.readyState==4){if((g.status>=200&&g.status<300)||g.status==304){if(g.response!=""){h(g.response);a();return}}b.cssfallback(f,c,a)}};g.send(null)}catch(d){b.cssfallback(f,c,a)}};lsloader.iofonts=function(f,c,h,a){var b=this;try{var g=new XMLHttpRequest();g.open("get",f,true);g.onreadystatechange=function(){if(g.readyState==4){if((g.status>=200&&g.status<300)||g.status==304){if(g.response!=""){h(g.response);a();return}}b.cssfallback(f,c,a)}};g.send(null)}catch(d){b.cssfallback(f,c,a)}};lsloader.runjs=function(f,c,e){if(!!c&&!!e){for(var b in this.jsRunSequence){if(this.jsRunSequence[b].name==c){this.jsRunSequence[b].code=e}}}if(!!this.jsRunSequence[0]&&!!this.jsRunSequence[0].code&&this.jsRunSequence[0].status!="failed"){var a=document.createElement("script");a.appendChild(document.createTextNode(this.jsRunSequence[0].code));a.type="text/javascript";document.getElementsByTagName("head")[0].appendChild(a);this.jsRunSequence.shift();if(this.jsRunSequence.length>0){this.runjs()}}else{if(!!this.jsRunSequence[0]&&this.jsRunSequence[0].status=="failed"){var d=this;var a=document.createElement("script");a.src=this.jsRunSequence[0].path;a.type="text/javascript";this.jsRunSequence[0].status="loading";a.onload=function(){d.jsRunSequence.shift();if(d.jsRunSequence.length>0){d.runjs()}};document.body.appendChild(a)}}};lsloader.tagLoad=function(b,a){this.jsRunSequence.push({name:a,code:"",path:b,status:"failed"});this.runjs()};lsloader.jsfallback=function(c,b){if(!!this.jsnamemap[b]){return}else{this.jsnamemap[b]=b}for(var a in this.jsRunSequence){if(this.jsRunSequence[a].name==b){this.jsRunSequence[a].code="";this.jsRunSequence[a].status="failed";this.jsRunSequence[a].path=c}}this.runjs()};lsloader.cssfallback=function(e,c,b){if(!!this.cssnamemap[c]){return}else{this.cssnamemap[c]=1}var d=document.createElement("link");d.type="text/css";d.href=e;d.rel="stylesheet";d.onload=d.onerror=b;var a=document.getElementsByTagName("script")[0];a.parentNode.insertBefore(d,a)};lsloader.runInlineScript=function(c,b){var a=document.getElementById(b).innerText;this.jsRunSequence.push({name:c,code:a});this.runjs()}})();</script>

    <!-- Import queue -->
    <script>function Queue(){this.dataStore=[];this.offer=b;this.poll=d;this.execNext=a;this.debug=false;this.startDebug=c;function b(e){if(this.debug){console.log("Offered a Queued Function.")}if(typeof e==="function"){this.dataStore.push(e)}else{console.log("You must offer a function.")}}function d(){if(this.debug){console.log("Polled a Queued Function.")}return this.dataStore.shift()}function a(){var e=this.poll();if(e!==undefined){if(this.debug){console.log("Run a Queued Function.")}e()}}function c(){this.debug=true}}var queue=new Queue();</script>

    <!-- Import CSS -->
    
        <style id="material_css"></style><script>if(typeof window.lsLoadCSSMaxNums === "undefined")window.lsLoadCSSMaxNums = 0;window.lsLoadCSSMaxNums++;lsloader.load("material_css","/Blog/css/material.min.css?Z7a72R1E4SxzBKR/WGctOA==",function(){if(typeof window.lsLoadCSSNums === "undefined")window.lsLoadCSSNums = 0;window.lsLoadCSSNums++;if(window.lsLoadCSSNums == window.lsLoadCSSMaxNums)document.documentElement.style.display="";}, false)</script>
        <style id="style_css"></style><script>if(typeof window.lsLoadCSSMaxNums === "undefined")window.lsLoadCSSMaxNums = 0;window.lsLoadCSSMaxNums++;lsloader.load("style_css","/Blog/css/style.min.css?NKhlKQkXw/c66TR5p4wO+w==",function(){if(typeof window.lsLoadCSSNums === "undefined")window.lsLoadCSSNums = 0;window.lsLoadCSSNums++;if(window.lsLoadCSSNums == window.lsLoadCSSMaxNums)document.documentElement.style.display="";}, false)</script>

        
            
                <style id="prettify_css"></style><script>if(typeof window.lsLoadCSSMaxNums === "undefined")window.lsLoadCSSMaxNums = 0;window.lsLoadCSSMaxNums++;lsloader.load("prettify_css","/Blog/css/prettify.min.css?zp8STOU9v89XWFEnN+6YmQ==",function(){if(typeof window.lsLoadCSSNums === "undefined")window.lsLoadCSSNums = 0;window.lsLoadCSSNums++;if(window.lsLoadCSSNums == window.lsLoadCSSMaxNums)document.documentElement.style.display="";}, false)</script>
                <style id="prettify_theme"></style><script>if(typeof window.lsLoadCSSMaxNums === "undefined")window.lsLoadCSSMaxNums = 0;window.lsLoadCSSMaxNums++;lsloader.load("prettify_theme","/Blog/css/prettify/github-v2.min.css?AfzKxt++K+/lhZBlSjnxwg==",function(){if(typeof window.lsLoadCSSNums === "undefined")window.lsLoadCSSNums = 0;window.lsLoadCSSNums++;if(window.lsLoadCSSNums == window.lsLoadCSSMaxNums)document.documentElement.style.display="";}, false)</script>
            
        

    

    

    <!-- Config CSS -->

<!-- Other Styles -->
<style>
  body, html {
    font-family: Roboto, "Helvetica Neue", Helvetica, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "微软雅黑", Arial, sans-serif;
    overflow-x: hidden !important;
  }
  
  code {
    font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
  }

  a {
    color: #00838F;
  }

  .mdl-card__media,
  #search-label,
  #search-form-label:after,
  #scheme-Paradox .hot_tags-count,
  #scheme-Paradox .sidebar_archives-count,
  #scheme-Paradox .sidebar-colored .sidebar-header,
  #scheme-Paradox .sidebar-colored .sidebar-badge{
    background-color: #0097A7 !important;
  }

  /* Sidebar User Drop Down Menu Text Color */
  #scheme-Paradox .sidebar-colored .sidebar-nav>.dropdown>.dropdown-menu>li>a:hover,
  #scheme-Paradox .sidebar-colored .sidebar-nav>.dropdown>.dropdown-menu>li>a:focus {
    color: #0097A7 !important;
  }

  #post_entry-right-info,
  .sidebar-colored .sidebar-nav li:hover > a,
  .sidebar-colored .sidebar-nav li:hover > a i,
  .sidebar-colored .sidebar-nav li > a:hover,
  .sidebar-colored .sidebar-nav li > a:hover i,
  .sidebar-colored .sidebar-nav li > a:focus i,
  .sidebar-colored .sidebar-nav > .open > a,
  .sidebar-colored .sidebar-nav > .open > a:hover,
  .sidebar-colored .sidebar-nav > .open > a:focus,
  #ds-reset #ds-ctx .ds-ctx-entry .ds-ctx-head a {
    color: #0097A7 !important;
  }

  .toTop {
    background: #757575 !important;
  }

  .material-layout .material-post>.material-nav,
  .material-layout .material-index>.material-nav,
  .material-nav a {
    color: #757575;
  }

  #scheme-Paradox .MD-burger-layer {
    background-color: #757575;
  }

  #scheme-Paradox #post-toc-trigger-btn {
    color: #757575;
  }

  .post-toc a:hover {
    color: #00838F;
    text-decoration: underline;
  }

</style>


<!-- Theme Background Related-->

    <style>
      body{
        background-color: #F5F5F5;
      }

      /* blog_info bottom background */
      #scheme-Paradox .material-layout .something-else .mdl-card__supporting-text{
        background-color: #fff;
      }
    </style>




<!-- Fade Effect -->

    <style>
      .fade {
        transition: all 800ms linear;
        -webkit-transform: translate3d(0,0,0);
        -moz-transform: translate3d(0,0,0);
        -ms-transform: translate3d(0,0,0);
        -o-transform: translate3d(0,0,0);
        transform: translate3d(0,0,0);
        opacity: 1;
      }

      .fade.out{
        opacity: 0;
      }
    </style>


<!-- Import Font -->
<!-- Import Roboto -->

    <link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500" rel="stylesheet">


<!-- Import Material Icons -->


    <style id="material_icons"></style><script>if(typeof window.lsLoadCSSMaxNums === "undefined")window.lsLoadCSSMaxNums = 0;window.lsLoadCSSMaxNums++;lsloader.load("material_icons","/Blog/css/material-icons.css?pqhB/Rd/ab0H2+kZp0RDmw==",function(){if(typeof window.lsLoadCSSNums === "undefined")window.lsLoadCSSNums = 0;window.lsLoadCSSNums++;if(window.lsLoadCSSNums == window.lsLoadCSSMaxNums)document.documentElement.style.display="";}, false)</script>




    <!-- Import jQuery -->
    
        <script>lsloader.load("jq_js","/Blog/js/jquery.min.js?qcusAULNeBksqffqUM2+Ig==", true)</script>
    

    <!-- WebAPP Icons -->
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="application-name" content="Ricardo Liu&#39;s Blog">
    <meta name="msapplication-starturl" content="http://tongtonglii.siyuan12.com/Blog/Blog/2018/10/24/08.密码学 | Many-Time-Pad攻击/">
    <meta name="msapplication-navbutton-color" content="#0097A7">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-title" content="Ricardo Liu&#39;s Blog">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon" href="/Blog/img/myfavicon.png">

    <!-- Site Verification -->
    <meta name="google-site-verification" content="pWGHf9daAxI3DLlQHJ9Y855-02IantVEKveJ9dOyvIk" />
    <meta name="baidu-site-verification" content="tRQjyh1WIh" />

    <!-- RSS -->
    
        
            <link rel=alternate type="application/atom+xml" href="atom.xml">
        
    

    <!-- The Open Graph protocol -->
    <meta property="og:url" content="http://tongtonglii.siyuan12.com/Blog/Blog/2018/10/24/08.密码学 | Many-Time-Pad攻击/">
    <meta property="og:type" content="blog">
    <meta property="og:title" content="密码学 | Many-Time-Pad攻击 | Ricardo Liu&#39;s Blog">
    <meta property="og:image" content="/Blog/img/myfavicon.png">
    <meta property="og:description" content="从理论上可知，Vernam密码的一次一密(One-Time-Pad)方案是不可破解的。但是，如果同一段密钥被用来加密多段密文，即多次一密(Many-Time-Pad)的情况下，加密方案就不再安全。本文以一次密码学课的作业为例，介绍Many-Time-Pad Attack的具体过程。">
    <meta property="og:article:tag" content="密码学"> <meta property="og:article:tag" content="Vernam"> 

    
        <meta property="article:published_time" content="Wed Oct 24 2018 22:42:48 GMT+0800">
        <meta property="article:modified_time" content="Fri Oct 26 2018 17:32:38 GMT+0800">
    

    <!-- The Twitter Card protocol -->
    <meta name="twitter:card" content="summary_large_image">

    <!-- Add canonical link for SEO -->
    
        <link rel="canonical" href="http://tongtonglii.siyuan12.com/Blog/Blog/2018/10/24/08.密码学 | Many-Time-Pad攻击/index.html" />
    

    <!-- Structured-data for SEO -->
    
        


<script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "BlogPosting",
    "mainEntityOfPage": "http://tongtonglii.siyuan12.com/Blog/Blog/2018/10/24/08.密码学 | Many-Time-Pad攻击/index.html",
    "headline": "密码学 | Many-Time-Pad攻击",
    "datePublished": "Wed Oct 24 2018 22:42:48 GMT+0800",
    "dateModified": "Fri Oct 26 2018 17:32:38 GMT+0800",
    "author": {
        "@type": "Person",
        "name": "Ricardo Liu",
        "image": {
            "@type": "ImageObject",
            "url": "/img/myavatar.png"
        },
        "description": "<span style='line-height: 1.3em;'>Write the code. Change the world.</span>,<span style='line-height: 1.3em;'>这是曾经的理想</span>,<span style='line-height: 1.3em;'>现在在斜杠青年的路上一往无前</span>"
    },
    "publisher": {
        "@type": "Organization",
        "name": "Ricardo Liu&#39;s Blog",
        "logo": {
            "@type":"ImageObject",
            "url": "/img/myfavicon.png"
        }
    },
    "keywords": ",密码学,Vernam编程, 摄影, 一切有趣的事情, Coding, Photography, Anything Interesting",
    "description": "从理论上可知，Vernam密码的一次一密(One-Time-Pad)方案是不可破解的。但是，如果同一段密钥被用来加密多段密文，即多次一密(Many-Time-Pad)的情况下，加密方案就不再安全。本文以一次密码学课的作业为例，介绍Many-Time-Pad Attack的具体过程。",
}
</script>


    

    <!-- Analytics -->
    
        <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
    ga('create', 'UA-74253337-1', 'auto');ga('send', 'pageview');
</script>
    
    
        <script>
    var _hmt = _hmt || [];
    (function() {var hm = document.createElement('script');
    hm.src = 'https://hm.baidu.com/hm.js?b3081f296b6a50b58e10c6e69464475d';
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(hm, s);
    })();
</script>
    
    

    <!-- Custom Head -->
    

</head>


    
        <body id="scheme-Paradox" class="lazy">
            <div class="material-layout  mdl-js-layout has-drawer is-upgraded">
                

                <!-- Main Container -->
                <main class="material-layout__content" id="main">

                    <!-- Top Anchor -->
                    <div id="top"></div>

                    
                        <!-- Hamburger Button -->
                        <button class="MD-burger-icon sidebar-toggle">
                            <span id="MD-burger-id" class="MD-burger-layer"></span>
                        </button>
                    

                    <!-- Post TOC -->

    
    <!-- Back Button -->
    <!--
    <div class="material-back" id="backhome-div" tabindex="0">
        <a class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon"
           href="#" onclick="window.history.back();return false;"
           target="_self"
           role="button"
           data-upgraded=",MaterialButton,MaterialRipple">
            <i class="material-icons" role="presentation">arrow_back</i>
            <span class="mdl-button__ripple-container">
                <span class="mdl-ripple"></span>
            </span>
        </a>
    </div>
    -->


    <!-- Left aligned menu below button -->
    
    
    <button id="post-toc-trigger-btn"
        class="mdl-button mdl-js-button mdl-button--icon">
        <i class="material-icons">format_list_numbered</i>
    </button>

    <ul class="post-toc-wrap mdl-menu mdl-menu--bottom-left mdl-js-menu mdl-js-ripple-effect" for="post-toc-trigger-btn" style="max-height:80vh; overflow-y:scroll;">
        <ol class="post-toc"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#01-问题背景"><span class="post-toc-number">1.</span> <span class="post-toc-text">01. 问题背景</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#02-破解内容"><span class="post-toc-number">2.</span> <span class="post-toc-text">02. 破解内容</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#03-分析过程"><span class="post-toc-number">3.</span> <span class="post-toc-text">03. 分析过程</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#密文配对"><span class="post-toc-number">3.1.</span> <span class="post-toc-text">密文配对</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#密文破解"><span class="post-toc-number">3.2.</span> <span class="post-toc-text">密文破解</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#04-代码"><span class="post-toc-number">4.</span> <span class="post-toc-text">04.代码</span></a></li></ol>
    </ul>
    




<!-- Layouts -->

    <!-- Post Module -->
    <div class="material-post_container">

        <div class="material-post mdl-grid">
            <div class="mdl-card mdl-shadow--4dp mdl-cell mdl-cell--12-col">

                <!-- Post Header(Thumbnail & Title) -->
                
    <!-- Paradox Post Header -->
    
        
            <!-- Random Thumbnail -->
            <div class="post_thumbnail-random mdl-card__media mdl-color-text--grey-50">
            <script type="text/ls-javascript" id="post-thumbnail-script">
    var randomNum = Math.floor(Math.random() * 19 + 1);

    $('.post_thumbnail-random').attr('data-original', '/Blog/img/random/material-' + randomNum + '.png');
    $('.post_thumbnail-random').addClass('lazy');
</script>

        
    
            <p class="article-headline-p">
                密码学 | Many-Time-Pad攻击
            </p>
        </div>





                
                    <!-- Paradox Post Info -->
                    <div class="mdl-color-text--grey-700 mdl-card__supporting-text meta">

    <!-- Author Avatar -->
    <div id="author-avatar">
        <img src="/Blog/img/myavatar.png" width="44px" height="44px" alt="Author Avatar"/>
    </div>
    <!-- Author Name & Date -->
    <div>
        <strong>Ricardo Liu</strong>
        <span>10月 24, 2018</span>
    </div>

    <div class="section-spacer"></div>

    <!-- Favorite -->
    <!--
        <button id="article-functions-like-button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon btn-like">
            <i class="material-icons" role="presentation">favorite</i>
            <span class="visuallyhidden">favorites</span>
        </button>
    -->

    <!-- Qrcode -->
    
        <button id="article-functions-qrcode-button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon">
    <i class="material-icons" role="presentation">devices other</i>
    <span class="visuallyhidden">devices other</span>
</button>
<ul class="mdl-menu mdl-menu--bottom-right mdl-js-menu mdl-js-ripple-effect" for="article-functions-qrcode-button">
    <li class="mdl-menu__item">在其它设备中阅读本文章</li>
    
        <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQ4AAAEOCAAAAABd2qZ5AAADlUlEQVR42u3ay27bQBAEQP3/TzvXAI7o7hmuzADFkwFLFLd4aMzj9eX663ohwIEDBw4cOHDgwIHjwRyv+PrHjeJvXd/h3d2SX9yfBQcOHDhwnOD4IYre/HDyKO+OnTDlL2Z1Fhw4cODAcYwjP0wSnKvwuyTLoZPIx4EDBw4cT+DIC6o29pJny5lw4MCBA8f/xfEuUPMjJeXfplDEgQMHDhy/y5EHXnuMfPjUNgeTV3WwV4oDBw4cONYLDc//+6P7HThw4MCB4xtHe+UlXBu9eQzn949OhAMHDhw4buXIgypvBc7GRZuYb58fBw4cOHCc5tgPnzZLcrMmYDusqpuDOHDgwIFjwZHcYrbWsFmku3497SeLXikOHDhw4FhzzMq2WXk2Y2qX5/L748CBAweOExyzoquNybbk24+aDvZKceDAgQPH5ULDpiWX/LcN0Ty88xZnsSqHAwcOHDjWHLMGX15otaXXPqSLgRkOHDhw4LiVoy2l2gO0d8sbi+0nh1M4HDhw4MAx4piVQ5vwuyEgS6yiV4oDBw4cOBYceduu/XtfIs5GYvWv4MCBAweOAxx5Cy/HSsZFURCOxlf5EgYOHDhw4DjHES2WlSVTvsQwi/n29RRBiwMHDhw4Rhxt2TNbWWhLstmrmr1mHDhw4MBxL8ddgdoSt5/M47NeqsCBAwcOHAc48njbPOKsHZnfpw1vHDhw4MBxmmNWJrWBNyvz2uZj8fw4cODAgeMAx2zkc2+jsA3atrH49pXgwIEDB45bOfJiqS2fZsGcRHK7iv1DmYoDBw4cOA5ztIOcfASV821eUr0CjgMHDhw4buXID5B/flZc5UOs9r+r5iAOHDhw4Bhx5D85W1bYtPBmDcEcBQcOHDhw3MtRt9IWR9osK1zfIWEqmoM4cODAgeMwRzvsycu5/ShrRoYDBw4cOD7DkcftLBTzpt4m2usxFQ4cOHDgOMYxa8PNirHNqGnTvsSBAwcOHKc52quN3rzwa8mSJma0QoEDBw4cOG7l2DT+8qJrVpi1y3Bt8YYDBw4cOM5x5OG6WYDIjzQL3WGLEwcOHDhwHONoi6vZYGkWxgnokVU5HDhw4MDxcY7Zgl177NkSQ3Q3HDhw4MDxGI7855NSrQ3jdsSFAwcOHDg+z9EuMbQB3K415AsWs9EXDhw4cOA4x7FZaJu17faRmXxrOHbCgQMHDhwLDhcOHDhw4MCBAwcOHDgedv0BXU8+p2tAtvsAAAAASUVORK5CYII=">
    
</ul>

    

    <!-- Tags (bookmark) -->
    
    <button id="article-functions-viewtags-button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon">
        <i class="material-icons" role="presentation">bookmark</i>
        <span class="visuallyhidden">bookmark</span>
    </button>
    <ul class="mdl-menu mdl-menu--bottom-right mdl-js-menu mdl-js-ripple-effect" for="article-functions-viewtags-button">
        <li class="mdl-menu__item">
        <a class="post_tag-link" href="/Blog/tags/Vernam/">Vernam</a></li><li class="mdl-menu__item"><a class="post_tag-link" href="/Blog/tags/密码学/">密码学</a>
    </ul>
    

    <!-- Share -->
    
        <button id="article-fuctions-share-button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon">
    <i class="material-icons" role="presentation">share</i>
    <span class="visuallyhidden">share</span>
</button>
<ul class="mdl-menu mdl-menu--bottom-right mdl-js-menu mdl-js-ripple-effect" for="article-fuctions-share-button">
    

    

    <!-- Share Weibo -->
    
        <a class="post_share-link" href="http://service.weibo.com/share/share.php?appkey=&title=密码学 | Many-Time-Pad攻击&url=http://tongtonglii.siyuan12.com/Blog/Blog/2018/10/24/08.密码学 | Many-Time-Pad攻击/index.html&pic=http://tongtonglii.siyuan12.com/Blog/img/myfavicon.png&searchPic=false&style=simple" target="_blank">
            <li class="mdl-menu__item">
                分享到微博
            </li>
        </a>
    

    <!-- Share Twitter -->
    

    <!-- Share Facebook -->
    
        <a class="post_share-link" href="https://www.facebook.com/sharer/sharer.php?u=http://tongtonglii.siyuan12.com/Blog/Blog/2018/10/24/08.密码学 | Many-Time-Pad攻击/index.html" target="_blank">
            <li class="mdl-menu__item">
                分享到 Facebook
            </li>
        </a>
    

    <!-- Share Google+ -->
    
        <a class="post_share-link" href="https://plus.google.com/share?url=http://tongtonglii.siyuan12.com/Blog/Blog/2018/10/24/08.密码学 | Many-Time-Pad攻击/index.html" target="_blank">
            <li class="mdl-menu__item">
                分享到 Google+
            </li>
        </a>
    

    <!-- Share LinkedIn -->
    
        <a class="post_share-link" href="https://www.linkedin.com/shareArticle?mini=true&url=http://tongtonglii.siyuan12.com/Blog/Blog/2018/10/24/08.密码学 | Many-Time-Pad攻击/index.html&title=密码学 | Many-Time-Pad攻击" target="_blank">
            <li class="mdl-menu__item">
                分享到 LinkedIn
            </li>
        </a>
    

    <!-- Share QQ -->
    

    <!-- Share Telegram -->
    
</ul>

    
</div>

                

                <!-- Post Content -->
                <div id="post-content" class="mdl-color-text--grey-700 mdl-card__supporting-text fade out">
    
        <blockquote>
<p><strong>摘要</strong>：从理论上可知，Vernam密码的一次一密(One-Time-Pad)方案是不可破解的。但是，如果同一段密钥被用来加密多段密文，即多次一密(Many-Time-Pad)的情况下，加密方案就不再安全。本文以一次密码学课的作业为例，介绍Many-Time-Pad Attack的具体过程。</p>
</blockquote>
<a id="more"></a>
<h2 id="01-问题背景"><a href="#01-问题背景" class="headerlink" title="01. 问题背景"></a>01. 问题背景</h2><p>Vernam加密法也称一次一密(One-Time-Pad)，使用与明文等长的随机密钥，对原文进行加密。由于密文与原文没有任何统计关系，所以一次一密的方案理论上是不可破解的。但是为了达到这样的效果，最重要的条件是，一旦明文改变，就不能再使用本次的密文。否则，多次一密(Many-Time-Pad)的场景下，这种加密方式就不再安全。</p>
<h2 id="02-破解内容"><a href="#02-破解内容" class="headerlink" title="02. 破解内容"></a>02. 破解内容</h2><p>现有6段使用Vernam加密过的字符串，但6段字符串总共使用了3个随机密钥，其中每个密钥都恰好使用了两次。6段明文分别是一段代码、一段莎士比亚的引言、一段歌词、三段其他的英语名言。需要破解出所有明文。</p>
<p>6段密文的下载地址：<a href="https://github.com/LiuTongtong7/Snippets/tree/master/Vernam/ciphertexts" target="_blank" rel="noopener">Github链接</a></p>
<h2 id="03-分析过程"><a href="#03-分析过程" class="headerlink" title="03. 分析过程"></a>03. 分析过程</h2><p>本题的解决过程应该分为两步：</p>
<ol>
<li>判断六段密文中，哪些密文是公用的统一密钥；</li>
<li>将配对后的密文进行破解。<br><br></li>
</ol>
<h3 id="密文配对"><a href="#密文配对" class="headerlink" title="密文配对"></a>密文配对</h3><p>设两段明文为$p_1$和$p_2$，密钥为$c$，则加密后的密文分别为$p_1 \oplus c$和$p_2 \oplus c$。如果将两段密文再做一次异或，根据异或的性质，有$(p_1 \oplus c) \oplus (p_2 \oplus c) = p_1 \oplus p_2$，结果是两段明文直接异或的结果，与密钥无关。因此对于任意两段密文，如果它们共用了密钥，它们异或的结果就等价于它们对应的明文直接异或。</p>
<p>一段英文文本中，绝大部分字符应该都是小写字母，其次是空格和大写字母，还有少数标点符号。因此两段英文文本做异或，大多数位置上都是小写字母之间做异或。遍历任意小写字母之间异或的结果，我们发现，小写字母之间异或的结果取值范围为<code>0x00-0x1F</code>。因此，两段明文之间异或的结果分布应该集中在<code>0x00-0x1F</code>之间（其次是<code>0x41-0x5A</code>，即空格与小写字母之间异或）。</p>
<p>因此，我们可以将六段密文两两做异或，分析各位置上取值的分布，如果两段密文共用了密钥，取值应该主要分布在<code>0x00-0x1F</code>之间。而如果两段密文不共用密钥，取值的分布应该更为平均。密文之间异或结果在各区间的频数如下（按<code>0x00-0x1F</code>区间的频数降序）：</p>
<table>
<thead>
<tr>
<th style="text-align:center">密文对</th>
<th style="text-align:center">0x00-0x1F</th>
<th style="text-align:center">0x20-0x3F</th>
<th style="text-align:center">0x40-0x5F</th>
<th style="text-align:center">0x60-0x7F</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">1 xor 3</td>
<td style="text-align:center">82</td>
<td style="text-align:center">5</td>
<td style="text-align:center">40</td>
<td style="text-align:center">1</td>
</tr>
<tr>
<td style="text-align:center">2 xor 5</td>
<td style="text-align:center">73</td>
<td style="text-align:center">5</td>
<td style="text-align:center">46</td>
<td style="text-align:center">4</td>
</tr>
<tr>
<td style="text-align:center">4 xor 6</td>
<td style="text-align:center">63</td>
<td style="text-align:center">5</td>
<td style="text-align:center">59</td>
<td style="text-align:center">1</td>
</tr>
<tr>
<td style="text-align:center">4 xor 5</td>
<td style="text-align:center">41</td>
<td style="text-align:center">35</td>
<td style="text-align:center">31</td>
<td style="text-align:center">21</td>
</tr>
<tr>
<td style="text-align:center">1 xor 6</td>
<td style="text-align:center">40</td>
<td style="text-align:center">27</td>
<td style="text-align:center">31</td>
<td style="text-align:center">30</td>
</tr>
<tr>
<td style="text-align:center">2 xor 3</td>
<td style="text-align:center">37</td>
<td style="text-align:center">45</td>
<td style="text-align:center">19</td>
<td style="text-align:center">27</td>
</tr>
<tr>
<td style="text-align:center">2 xor 6</td>
<td style="text-align:center">36</td>
<td style="text-align:center">34</td>
<td style="text-align:center">35</td>
<td style="text-align:center">23</td>
</tr>
<tr>
<td style="text-align:center">5 xor 6</td>
<td style="text-align:center">35</td>
<td style="text-align:center">33</td>
<td style="text-align:center">35</td>
<td style="text-align:center">25</td>
</tr>
<tr>
<td style="text-align:center">1 xor 4</td>
<td style="text-align:center">35</td>
<td style="text-align:center">32</td>
<td style="text-align:center">36</td>
<td style="text-align:center">25</td>
</tr>
<tr>
<td style="text-align:center">3 xor 6</td>
<td style="text-align:center">35</td>
<td style="text-align:center">29</td>
<td style="text-align:center">32</td>
<td style="text-align:center">32</td>
</tr>
<tr>
<td style="text-align:center">2 xor 4</td>
<td style="text-align:center">34</td>
<td style="text-align:center">36</td>
<td style="text-align:center">39</td>
<td style="text-align:center">19</td>
</tr>
<tr>
<td style="text-align:center">3 xor 4</td>
<td style="text-align:center">34</td>
<td style="text-align:center">32</td>
<td style="text-align:center">33</td>
<td style="text-align:center">29</td>
</tr>
<tr>
<td style="text-align:center">1 xor 5</td>
<td style="text-align:center">26</td>
<td style="text-align:center">43</td>
<td style="text-align:center">21</td>
<td style="text-align:center">38</td>
</tr>
<tr>
<td style="text-align:center">1 xor 2</td>
<td style="text-align:center">26</td>
<td style="text-align:center">39</td>
<td style="text-align:center">28</td>
<td style="text-align:center">35</td>
</tr>
<tr>
<td style="text-align:center">3 xor 5</td>
<td style="text-align:center">23</td>
<td style="text-align:center">43</td>
<td style="text-align:center">24</td>
<td style="text-align:center">38</td>
</tr>
</tbody>
</table>
<p>与我们的分析一致，密文1和3、2和5、4和6异或的分布集中在<code>0x00-0x1F</code>和<code>0x40-0x5F</code>之间，而其他配对异或结果的分布很平均。所以，我们可以断定，密文1和3、2和5、4和6分别共用了同一密钥。</p>
<h3 id="密文破解"><a href="#密文破解" class="headerlink" title="密文破解"></a>密文破解</h3><p>在确定了哪些密文共用的是同一密钥之后，下一步就是逐对破解。</p>
<blockquote>
<p>破解时，我们最主要的依据是题干中的：“6段明文分别是一段代码、一段莎士比亚的引言、一段歌词、三段其他的英语名言。”这个条件大大缩小了语料库，同时也为我们提供了突破口。</p>
</blockquote>
<p>为了方便验证猜想，我制作了一个前端工具（见第4部分）。页面的左右两边分别为一对密文，当在某个位置填入字符（猜想的明文）后，工具会自动在另一侧算出对应的明文。</p>
<p><img src="/BlogImages/Many-Time-Pad攻击/前端工具.png" alt="前端工具"></p>
<p>由于空格与小写字母之间异或结果的取值范围为<code>0x41-0x5A</code>，我们可以通过这个范围去大致观察空格的分布。在密文2和5的结果中（如下），我们发现最后的18个位置几乎都是位于上述区间或者是<code>0x00</code>（空格与空格异或），不禁猜想，难道某个明文尾部是用空格填充的？</p>
<pre><code>&#39;05&#39;, &#39;49&#39;, &#39;1d&#39;, &#39;11&#39;, &#39;13&#39;, &#39;0b&#39;, &#39;52&#39;, &#39;0d&#39;, 
&#39;54&#39;, &#39;21&#39;, &#39;0e&#39;, &#39;43&#39;, &#39;11&#39;, &#39;4f&#39;, &#39;18&#39;, &#39;59&#39;, 
&#39;57&#39;, &#39;11&#39;, &#39;1b&#39;, &#39;04&#39;, &#39;49&#39;, &#39;18&#39;, &#39;1c&#39;, &#39;0e&#39;, 
&#39;4b&#39;, &#39;40&#39;, &#39;4f&#39;, &#39;59&#39;, &#39;69&#39;, &#39;41&#39;, &#39;4f&#39;, &#39;1d&#39;, 
&#39;09&#39;, &#39;1a&#39;, &#39;52&#39;, &#39;04&#39;, &#39;00&#39;, &#39;4b&#39;, &#39;45&#39;, &#39;29&#39;, 
&#39;1f&#39;, &#39;54&#39;, &#39;59&#39;, &#39;1b&#39;, &#39;1a&#39;, &#39;00&#39;, &#39;00&#39;, &#39;00&#39;, 
&#39;00&#39;, &#39;1b&#39;, &#39;00&#39;, &#39;17&#39;, &#39;00&#39;, &#39;00&#39;, &#39;1a&#39;, &#39;07&#39;, 
&#39;11&#39;, &#39;00&#39;, &#39;17&#39;, &#39;00&#39;, &#39;4e&#39;, &#39;10&#39;, &#39;0c&#39;, &#39;18&#39;, 
&#39;05&#39;, &#39;50&#39;, &#39;4e&#39;, &#39;04&#39;, &#39;48&#39;, &#39;06&#39;, &#39;0f&#39;, &#39;00&#39;, 
&#39;18&#39;, &#39;00&#39;, &#39;45&#39;, &#39;43&#39;, &#39;07&#39;, &#39;48&#39;, &#39;54&#39;, &#39;2b&#39;, 
&#39;09&#39;, &#39;16&#39;, &#39;53&#39;, &#39;06&#39;, &#39;13&#39;, &#39;4e&#39;, &#39;0d&#39;, &#39;4c&#39;, 
&#39;29&#39;, &#39;04&#39;, &#39;06&#39;, &#39;4e&#39;, &#39;43&#39;, &#39;45&#39;, &#39;0d&#39;, &#39;36&#39;, 
&#39;04&#39;, &#39;0b&#39;, &#39;16&#39;, &#39;02&#39;, &#39;11&#39;, &#39;52&#39;, &#39;65&#39;, &#39;00&#39;, 
&#39;00&#39;, &#39;53&#39;, &#39;0d&#39;, &#39;0a&#39;, &#39;1c&#39;, &#39;1c&#39;, &#39;00&#39;, &#39;45&#39;, 
&#39;41&#39;, &#39;52&#39;, &#39;00&#39;, &#39;0d&#39;, &#39;74&#39;, &#39;48&#39;, &#39;45&#39;, &#39;00&#39;, 
&#39;62&#39;, &#39;45&#39;, &#39;41&#39;, &#39;54&#39;, &#39;4c&#39;, &#39;45&#39;, &#39;53&#39;, &#39;00&#39;
</code></pre><p>于是将2和5其中一段明文的尾部18个字符设为空格，发现另一段明文的尾部为<code>ear -The Beatles</code>。原来是甲壳虫的歌词，我们的语料库范围进一步缩小。搜索甲壳虫含<code>ear</code>的歌词，找到了《Do You Want to Know a Secret》，其中含<code>ear</code>的句子为<code>Let me whisper in your ear</code>。由于我们不知道原文中具体大小写、标点的情况，所以我们从后往前填入，同时观察另一段明文的内容，为<code>learn. -Albert Einstein</code>，搜索可知，是爱因斯坦的名言”I never teach my pupils. I only attempt to provide the conditions in which they can learn.” 两段明文的出处都知道了，由于明文与网上查到的内容可能不完全一致，所以接下来交替着从后向前填入两段明文，注意处理标点、空格、大写的问题。结果如下：</p>
<p><img src="/BlogImages/Many-Time-Pad攻击/25.png" alt="前端工具"></p>
<p>密文2和5的明文是一段歌词和一段名言，它们在歌词和名言之后，都加上了作者的名字，然后用空格填补剩下的长度。这一点透露了文本的格式信息。由于剩下的4段文本中有一段是莎士比亚的名言，我们自然可以猜想，有一段明文的尾部应该是<code>William Shakespeare</code>，后面可能会有一些空格。在1和3、4和6都进行试验，发现如果将1和3的一段明文的尾部设为<code>William Shakespeare</code>，另一段明文的尾部为<code>k rules Neil Gaiman</code>，是尼尔·盖曼的名言，语料库范围成功缩小，搜索可知，是”Now go and make interesting mistakes, make amazing mistakes, make glorious and fantastic mistakes. Break rules.” 从后往前依次填入，发现莎士比亚的引言是出自《无事生非》的”Therefore all hearts in love use their own tongues. Let every eye negotiate for itself. And trust no agent” 两段明文的出处都知道了，跟上面一样，由于明文与原文不完全一致，交替着从后向前填入两段明文，结果如下：</p>
<p><img src="/BlogImages/Many-Time-Pad攻击/13.png" alt="前端工具"></p>
<p>最后剩下的1和3对应的是一段代码和一段名言。破解这一对的突破口是代码。因为另一段文本是名言，其中的字符应该只可能是大小写字母、空格、常见标点，因此我们可以猜测代码所用的语言（C/C++、Java、Python等），然后用该语言的关键字（对于C/C++，如int、char、double、if、for、printf等）在原文中每个位置进行匹配，看另一段明文中解析出的字符是否合法，以此判断该位置是不是能放该关键字。然后在根据另一段解析出的文本，利用互联网提供的语料库进行搜索。</p>
<p>在试验时，首先尝试最长的关键词<code>printf</code>，因为它能够提供最多的信息。我发现在25-31的位置上可以填入<code>printf(</code>，另一段解析出的是<code>yoursel</code>，在111-117的位置上也可以填入<code>printf(</code>，另一段解析出的是<code>eg.  -S</code>，看来就是名言的末尾了，猜测110位置是空格，则另一段是<code>l</code>，于是名言最后一个词很可能是<code>leg</code>（或者leg是一个后缀）。然后我们最希望获得的是完整的人名，这样我们基本就能够确定这一段名言了。继续猜测<code>printf(</code>下面的内容，很可能应该是<code>printf(&quot;____&quot;);</code>这样的格式，于是我们尝试不同的打印长度，发现如果打印长度是4时，右侧都是合法字符，人名是<code>St____tru</code>。暂时联想不出合适的人名。</p>
<p>接着尝试别的关键词，在另一段中会出现一些英文单词的片段，辅助以英文词库，来猜测完整的单词，然后反过来对代码进行补全。交替使用这种方式不断尝试，其中成功试验的结果如下：</p>
<ul>
<li>我们发现在1-4上可以填入<code>int</code>，另一段解析出的是<code>mak</code>，由于0的位置上只剩一个字符，根据代码的特点，猜测是<code>{</code>，于是另一段变为<code>C mak</code>（猜想应该是<code>C makes</code>）。</li>
<li>由于开头有一个左大括号，刚刚我们在结尾还有两个空位置，如果126上填入<code>}</code>，那么人名就变为了<code>St____trup</code>，看起来是合理的。</li>
<li>12-16上可以填入<code>char</code>，另一段为<code>asy t</code>（猜想应该是<code>easy to</code>）。</li>
</ul>
<p>现在名言中我们已经获得的片段是<code>C mak</code>(<code>C makes</code>)、<code>asy t</code>(<code>easy to</code>)、<code>leg.</code>，然后人名是<code>St____trup</code>。利用搜索引擎稍加搜索，可以找到它是“C++之父”Stroustrup的名言”C makes it easy to shoot yourself in the foot; C++ makes it harder, but when you do it blows your whole leg off.” 将这一段文本逐步填入，注意处理符号、空格，保证代码也是合理的。于是我们可以得到如下结果：</p>
<p><img src="/BlogImages/Many-Time-Pad攻击/46.png" alt="前端工具"></p>
<h2 id="04-代码"><a href="#04-代码" class="headerlink" title="04.代码"></a>04.代码</h2><p>前端工具地址：<a href="https://github.com/LiuTongtong7/Snippets/tree/master/Vernam/www" target="_blank" rel="noopener">Github链接</a>。</p>
<p>工具是一个静态页面。使用时将URL中的querystring设置为“?left=i&amp;right=j”，即可在左侧显示密文i，右侧显示密文j，如<code>your_url?left=2&amp;right=5</code>会显示密文2和密文5。如果querystring为空，默认显示密文1和密文3。</p>

        
    

    
</div>


                

                <!-- Post Comments -->
                
                    
    <!-- 使用 DISQUS_CLICK -->
<div id="disqus-comment">
    <div id="disqus_thread"></div>

<!-- add animation -->
<style>
	.disqus_click_btn {
            line-height: 30px;
            margin: 0;
            min-width: 50px;
            padding: 0 14px;
            display: inline-block;
            font-family: "Roboto", "Helvetica", "Arial", sans-serif;
            font-size: 14px;
            font-weight: 400;
            text-transform: uppercase;
            letter-spacing: 0;
            overflow: hidden;
            will-change: box-shadow;
            transition: box-shadow .2s cubic-bezier(.4, 0, 1, 1), background-color .2s cubic-bezier(.4, 0, .2, 1), color .2s cubic-bezier(.4, 0, .2, 1);
            outline: 0;
            cursor: pointer;
            text-decoration: none;
            text-align: center;
            vertical-align: middle;
            border: 0;
            background: rgba(158, 158, 158, .2);
            box-shadow: 0 2px 2px 0 rgba(0, 0, 0, .14), 0 3px 1px -2px rgba(0, 0, 0, .2), 0 1px 5px 0 rgba(0, 0, 0, .12);
            color: #fff;
            background-color: #757575;
            text-shadow: 0;
            display: none
        }
</style>
	
<div class="btn_click_load"> 
    <button class="disqus_click_btn">阅读评论（请确保 disqus 可以正常加载）</button>
</div>

<script type="text/javascript">
    var disqus_config = function () {
        this.page.url = 'http://tongtonglii.siyuan12.com/Blog/2018/10/24/08.密码学 | Many-Time-Pad攻击/';  // Replace PAGE_URL with your page's canonical URL variable
        this.page.identifier = 'http://tongtonglii.siyuan12.com/Blog/2018/10/24/08.密码学 | Many-Time-Pad攻击/'; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
    };
</script>

<script type="text/ls-javascript" id="disqus-lazy-load-script">
    $.ajax({
        url: 'https://disqus.com/next/config.json',
        timeout: 4000,
        type: 'GET',
        success: (function() {
            var d = document;
            var s = d.createElement('script');
            s.src = '//sevenspace-liutt.disqus.com/embed.js';
            s.setAttribute('data-timestamp', + new Date());
            (d.head || d.body).appendChild(s);
            $('.disqus_click_btn').css('display','none');
        })(),
        error: function() {
          $('.disqus_click_btn').css('display','block');
        }
    });
    $('.btn_click_load').click(function() {  //click to load comments
        (function() { // DON'T EDIT BELOW THIS LINE
            var d = document;
            var s = d.createElement('script');
            s.src = '//sevenspace-liutt.disqus.com/embed.js';
            s.setAttribute('data-timestamp', + new Date());
            (d.head || d.body).appendChild(s);
        })();
        $('.disqus_click_btn').css('display','none');
    });
</script>
  	

</div>
<style>
    #disqus-comment{
        background-color: #eee;
        padding: 2pc;
    }
</style>

                
            </div>

            <!-- Post Prev & Next Nav -->
            <nav class="material-nav mdl-color-text--grey-50 mdl-cell mdl-cell--12-col">
    <!-- Prev Nav -->
    

    <!-- Section Spacer -->
    <div class="section-spacer"></div>

    <!-- Next Nav -->
    
        <a href="/Blog/2018/03/12/09.Python | 更新Python后如何更新virtualenv/" id="post_nav-older" class="next-content">
            旧篇
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            <button class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon mdl-color--white mdl-color-text--grey-900" role="presentation">
                <i class="material-icons">arrow_forward</i>
            </button>
        </a>
    
</nav>

        </div>
    </div>



                    
                        <!-- Overlay For Active Sidebar -->
<div class="sidebar-overlay"></div>

<!-- Material sidebar -->
<aside id="sidebar" class="sidebar sidebar-colored sidebar-fixed-left" role="navigation">
    <div id="sidebar-main">
        <!-- Sidebar Header -->
        <div class="sidebar-header header-cover" style="background-image: url(/Blog/img/mysidebar_header.png);">
    <!-- Top bar -->
    <div class="top-bar"></div>

    <!-- Sidebar toggle button -->
    <button type="button" class="sidebar-toggle mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon" style="display: initial;" data-upgraded=",MaterialButton,MaterialRipple">
        <i class="material-icons">clear_all</i>
        <span class="mdl-button__ripple-container">
            <span class="mdl-ripple">
            </span>
        </span>
    </button>

    <!-- Sidebar Avatar -->
    <div class="sidebar-image">
        <img src="/Blog/img/myavatar.png" alt="Ricardo Liu's avatar">
    </div>

    <!-- Sidebar Email -->
    <a data-toggle="dropdown" class="sidebar-brand" href="#settings-dropdown">
        liutongtong7@gmail.com
        <b class="caret"></b>
    </a>
</div>


        <!-- Sidebar Navigation  -->
        <ul class="nav sidebar-nav">
    <!-- User dropdown  -->
    <li class="dropdown">
        <ul id="settings-dropdown" class="dropdown-menu">
            
                <li>
                    <a href="mailto: liutongtong7@gmail.com" target="_blank" title="Email Me">
                        
                            <i class="material-icons sidebar-material-icons sidebar-indent-left1pc-element">email</i>
                        
                        Email Me
                    </a>
                </li>
            
        </ul>
    </li>

    <!-- Homepage -->
    
        <li id="sidebar-first-li">
            <a href="/Blog/">
                
                    <i class="material-icons sidebar-material-icons">home</i>
                
                主页
            </a>
        </li>
        
    

    <!-- Archives  -->
    
        <li class="dropdown">
            <a href="#" class="ripple-effect dropdown-toggle" data-toggle="dropdown">
                
                    <i class="material-icons sidebar-material-icons">inbox</i>
                
                    归档
                <b class="caret"></b>
            </a>
            <ul class="dropdown-menu">
            <li>
                <a class="sidebar_archives-link" href="/Blog/archives/2018/10/">十月 2018<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/Blog/archives/2018/03/">三月 2018<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/Blog/archives/2018/01/">一月 2018<span class="sidebar_archives-count">2</span></a></li><li><a class="sidebar_archives-link" href="/Blog/archives/2015/03/">三月 2015<span class="sidebar_archives-count">2</span></a></li><li><a class="sidebar_archives-link" href="/Blog/archives/2015/02/">二月 2015<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/Blog/archives/2014/12/">十二月 2014<span class="sidebar_archives-count">1</span></a>
            </ul>
        </li>
        
    

    <!-- Categories  -->
    
        <li class="dropdown">
            <a href="#" class="ripple-effect dropdown-toggle" data-toggle="dropdown">
                
                    <i class="material-icons sidebar-material-icons">chrome_reader_mode</i>
                
                分类
                <b class="caret"></b>
            </a>
            <ul class="dropdown-menu">
                <li>
                <a class="sidebar_archives-link" href="/Blog/categories/Azure/">Azure<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/Blog/categories/Haskell/">Haskell<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/Blog/categories/Mac/">Mac<span class="sidebar_archives-count">2</span></a></li><li><a class="sidebar_archives-link" href="/Blog/categories/Python/">Python<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/Blog/categories/密码学/">密码学<span class="sidebar_archives-count">2</span></a></li><li><a class="sidebar_archives-link" href="/Blog/categories/经济学/">经济学<span class="sidebar_archives-count">1</span></a>
            </ul>
        </li>
        
    

    <!-- Pages  -->
    
        <li>
            <a href="http://tongtonglii.siyuan12.com/About/cn.html" title="关于">
                
                    <i class="material-icons sidebar-material-icons">person</i>
                
                关于
            </a>
        </li>
        
    
        <li>
            <a href="http://tongtonglii.siyuan12.com/About/en.html" title="About">
                
                    <i class="material-icons sidebar-material-icons">person</i>
                
                About
            </a>
        </li>
        
            <li class="divider"></li>
        
    

    <!-- Article Number  -->
    
        <li>
            <a href="/archives">
                文章总数
                <span class="sidebar-badge">8</span>
            </a>
        </li>
        
    
</ul>


        <!-- Sidebar Footer -->
        <!--
I'm glad you use this theme, the development is no so easy, I hope you can keep the copyright, I will thank you so much.
If you still want to delete the copyrights, could you still retain the first one? Which namely "Theme Material"
It will not impact the appearance and can give developers a lot of support :)

很高兴您使用并喜欢该主题，开发不易 十分谢谢与希望您可以保留一下版权声明。
如果您仍然想删除的话 能否只保留第一项呢？即 "Theme Material"
它不会影响美观并可以给开发者很大的支持和动力。 :)
-->

<!-- Sidebar Divider -->


<!-- Theme Material -->


<!-- Help & Support -->
<!--

    <a href="mailto:hiviosey@gmail.com" class="sidebar-footer-text-a">
        <div class="sidebar-text mdl-button mdl-js-button mdl-js-ripple-effect sidebar-footer-text-div" data-upgraded=",MaterialButton,MaterialRipple">
        sidebar.help
        <span class="mdl-button__ripple-container">
          <span class="mdl-ripple"></span>
        </span>
      </div>
    </a>

-->

<!-- Feedback -->
<!--

    <a href="https://github.com/viosey/hexo-theme-material/issues" target="_blank" class="sidebar-footer-text-a">
        <div class="sidebar-text mdl-button mdl-js-button mdl-js-ripple-effect sidebar-footer-text-div" data-upgraded=",MaterialButton,MaterialRipple">
        sidebar.feedback
        <span class="mdl-button__ripple-container"><span class="mdl-ripple"></span></span></div>
    </a>

-->

<!-- About Theme -->
<!--

    <a href="https://blog.viosey.com/index.php/Material.html" target="_blank" class="sidebar-footer-text-a">
        <div class="sidebar-text mdl-button mdl-js-button mdl-js-ripple-effect sidebar-footer-text-div" data-upgraded=",MaterialButton,MaterialRipple">
             sidebar.about_theme
            <span class="mdl-button__ripple-container"><span class="mdl-ripple"></span></span></div>
    </a>

-->

    </div>

    <!-- Sidebar Image -->
    

</aside>

                    

                    
                        <!-- Footer Top Button -->
                        <div id="back-to-top" class="toTop-wrap">
    <a href="#top" class="toTop">
        <i class="material-icons footer_top-i">expand_less</i>
    </a>
</div>

                    

                    <!--Footer-->
<footer class="mdl-mini-footer" id="bottom">
    
        <!-- Paradox Footer Left Section -->
        <div class="mdl-mini-footer--left-section sns-list">
    <!-- Twitter -->
    

    <!-- Facebook -->
    
        <a href="https://www.facebook.com/100007748653966" target="_blank">
            <button class="mdl-mini-footer--social-btn social-btn footer-sns-facebook">
                <span class="visuallyhidden">Facebook</span>
            </button><!--
     --></a>
    

    <!-- Google + -->
    

    <!-- Weibo -->
    

    <!-- Instagram -->
    
        <a href="https://www.instagram.com/ricardo.liutt" target="_blank">
            <button class="mdl-mini-footer--social-btn social-btn footer-sns-instagram">
                <span class="visuallyhidden">Instagram</span>
            </button><!--
     --></a>
    

    <!-- Tumblr -->
    

    <!-- Github -->
    
        <a href="https://github.com/LiuTongtong7" target="_blank">
            <button class="mdl-mini-footer--social-btn social-btn footer-sns-github">
                <span class="visuallyhidden">Github</span>
            </button><!--
     --></a>
    

    <!-- LinkedIn -->
    
        <a href="https://www.linkedin.com/in/liutongtong" target="_blank">
            <button class="mdl-mini-footer--social-btn social-btn footer-sns-linkedin">
                <span class="visuallyhidden">LinkedIn</span>
            </button><!--
     --></a>
    

    <!-- Zhihu -->
    

    <!-- Bilibili -->
    

    <!-- Telegram -->
    

    <!-- V2EX -->
    

    <!-- Segmentfault -->
    
</div>


        <!--Copyright-->
        <div id="copyright">
            Copyright&nbsp;©&nbsp;<span year></span>&nbsp;Ricardo Liu's Blog
            
                <br>
                
                    TT的私人领地
                
            
        </div>

        <!-- Paradox Footer Right Section -->

        <!--
        I am glad you use this theme, the development is no so easy, I hope you can keep the copyright.
        It will not impact the appearance and can give developers a lot of support :)

        很高兴您使用该主题，开发不易，希望您可以保留一下版权声明。
        它不会影响美观并可以给开发者很大的支持。 :)
        -->

        <div class="mdl-mini-footer--right-section">
            <div>
                <div class="footer-develop-div">Powered by <a href="https://hexo.io" target="_blank" class="footer-develop-a">Hexo</a></div>
                <div class="footer-develop-div">Theme - <a href="https://github.com/viosey/hexo-theme-material" target="_blank" class="footer-develop-a">Material</a></div>
            </div>
        </div>
    
</footer>


                    <!-- Import JS File -->

    <script>lsloader.load("lazyload_js","/Blog/js/lazyload.min.js?1BcfzuNXqV+ntF6gq+5X3Q==", true)</script>



    <script>lsloader.load("js_js","/Blog/js/js.min.js?Bn9UzEm8RrBSxqyZB0zPjA==", true)</script>



    <script>lsloader.load("np_js","/Blog/js/nprogress.js?pl3Qhb9lvqR1FlyLUna1Yw==", true)</script>


<script type="text/ls-javascript" id="NProgress-script">
    NProgress.configure({
        showSpinner: true
    });
    NProgress.start();
    $('#nprogress .bar').css({
        'background': '#29d'
    });
    $('#nprogress .peg').css({
        'box-shadow': '0 0 10px #29d, 0 0 15px #29d'
    });
    $('#nprogress .spinner-icon').css({
        'border-top-color': '#29d',
        'border-left-color': '#29d'
    });
    setTimeout(function() {
        NProgress.done();
        $('.fade').removeClass('out');
    }, 800);
</script>



    
        <script>lsloader.load("sm_js","/Blog/js/smoothscroll.js?lOy/ACj5suSNi7ZVFVbpFQ==", true)</script>
    







   <!-- 使用 DISQUS js 代码 -->






<!-- UC Browser Compatible -->
<script>
	var agent = navigator.userAgent.toLowerCase();
	if(agent.indexOf('ucbrowser')>0) {
		document.write('<link rel="stylesheet" href="/Blog/css/uc.css">');
	   alert('由于 UC 浏览器使用极旧的内核，而本网站使用了一些新的特性。\n为了您能更好的浏览，推荐使用 Chrome 或 Firefox 浏览器。');
	}
</script>

<!-- Import prettify js  -->

    
        
            <script>lsloader.load("prettify_js","/Blog/js/prettify.min.js?WN07fivHQSMKWy7BmHBB6w==", true)</script>
        
    



<!-- Window Load -->
<!-- add class for prettify -->
<script type="text/ls-javascript" id="window-load">
    $(window).on('load', function() {
        // Post_Toc parent position fixed
        $('.post-toc-wrap').parent('.mdl-menu__container').css('position', 'fixed');
    });

    
        
            $(function() {
                $('pre').addClass('prettyprint linenums').attr('style', 'overflow:auto;');
                prettyPrint();
                })
        
    
    
</script>

<!-- MathJax Load-->

    <script type="text/x-mathjax-config">
    MathJax.Hub.Config({"HTML-CSS": { preferredFont: "TeX", availableFonts: ["STIX","TeX"], linebreaks: { automatic:true }, EqnChunk: (MathJax.Hub.Browser.isMobile ? 10 : 50) },
        tex2jax: { inlineMath: [ ["$", "$"], ["\\(","\\)"] ], processEscapes: true, ignoreClass: "tex2jax_ignore|dno",skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']},
        TeX: {  noUndefined: { attributes: { mathcolor: "red", mathbackground: "#FFEEEE", mathsize: "90%" } }, Macros: { href: "{}" } },
        messageStyle: "none"
    });
</script>
<script type="text/x-mathjax-config">
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for(i=0; i < all.length; i += 1) {
            all[i].SourceElement().parentNode.className += ' has-jax';
        }
    });
</script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>




<!-- Bing Background -->


<script type="text/ls-javascript" id="lazy-load">
    // Offer LazyLoad
    queue.offer(function(){
        $('.lazy').lazyload({
            effect : 'show'
        });
    });

    // Start Queue
    $(document).ready(function(){
        setInterval(function(){
            queue.execNext();
        },200);
    });
</script>

<!-- Custom Footer -->



<script>
    var copyrightNow = new Date().getFullYear();
    var textContent = document.querySelector('span[year]')

    copyrightSince = 2014;
    if (copyrightSince === copyrightNow||copyrightSince === 0000) {
        textContent.textContent = copyrightNow
    } else {
        textContent.textContent = copyrightSince + ' - ' + copyrightNow
    }

    (function(){
        var scriptList = document.querySelectorAll('script[type="text/ls-javascript"]')

        for (var i = 0; i < scriptList.length; ++i) {
            var item = scriptList[i];
            lsloader.runInlineScript(item.id,item.id);
        }
    })()
console.log('\n %c © Material Theme | Version: 1.5.6 | https://github.com/viosey/hexo-theme-material %c \n', 'color:#455a64;background:#e0e0e0;padding:5px 0;border-top-left-radius:5px;border-bottom-left-radius:5px;', 'color:#455a64;background:#e0e0e0;padding:5px 0;border-top-right-radius:5px;border-bottom-right-radius:5px;');
</script>

                </main>
            </div>
        </body>
    
</html>
